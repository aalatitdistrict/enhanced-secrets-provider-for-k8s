#!/usr/bin/env bash

set -e

. bin/build_utils

FULL_VERSION_TAG="$(full_version_tag)"

echo "---"

echo "Building secrets-provider-for-k8s Docker image"

docker build \
  --tag "secrets-provider-for-k8s:dev" \
  --tag "secrets-provider-for-k8s:${FULL_VERSION_TAG}" \
  --tag "secrets-provider-for-k8s:latest" \
  --target "secrets-provider" \
  .

echo "Building secrets-provider-for-k8s-redhat:$FULL_VERSION_TAG Docker image"

docker build --tag "secrets-provider-for-k8s-redhat:${FULL_VERSION_TAG}" \
   --build-arg VERSION="$FULL_VERSION_TAG" \
   --target "secrets-provider-for-k8s-redhat" \
   .

echo "---"
